{
  "version": 3,
  "sources": ["../../../app/routes/admin.projects.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/admin.projects.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/admin.projects.tsx\");\n  import.meta.hot.lastModified = \"1713710088333.876\";\n}\n// REMIX HMR END\n\nimport { json } from \"@remix-run/node\";\nimport { useLoaderData } from \"@remix-run/react\";\nimport { Children } from \"react\";\nimport { db } from \"~/utils/db.server\";\nimport { getAdminUserOrRedirect } from \"~/utils/getUserUtils\";\nexport const loader = async ({\n  request\n}) => {\n  await getAdminUserOrRedirect(request);\n  const projects = await db.project.findMany({\n    select: {\n      name: true,\n      createdAt: true,\n      id: true,\n      User: true\n    },\n    orderBy: {\n      createdAt: \"desc\"\n    }\n  });\n  if (!projects || !projects.length) {\n    throw json(null, {\n      status: 404\n    });\n  }\n  const sevenDaysAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);\n  const thisWeek = await db.project.count({\n    where: {\n      createdAt: {\n        lte: new Date(),\n        gte: sevenDaysAgo\n      }\n    }\n  });\n  return {\n    projects,\n    totals: {\n      all: projects.length,\n      thisWeek: thisWeek\n    }\n  };\n};\nexport default function Page() {\n  _s();\n  const {\n    projects,\n    totals\n  } = useLoaderData();\n  return <article className=\"mx-auto max-w-5xl px-6 py-20\">\n      <h2 className=\"font-bold text-3xl\">Recent Projects</h2>\n      <section className=\"flex py-2 px-4 rounded gap-4\">\n        <div className=\"flex\">\n          <span>Projectos en total: </span>\n          <strong>{totals.all}</strong>\n        </div>\n        <div className=\"flex\">\n          <span>Projectos agregados esta semana:</span>\n          <strong className=\"text-brand-500\">{totals.thisWeek}</strong>\n        </div>\n      </section>\n      <section id=\"table\">\n        <Row>\n          <span>Usuario</span>\n          <span>Nombre</span>\n          <span>Fecha</span>\n        </Row>\n        {projects.map(p => <Row key={p.id}>\n            <span>{p.User?.email}</span>\n            <span>{p.name}</span>\n            <span>{new Date(p.createdAt).toLocaleString()}</span>\n          </Row>)}\n      </section>\n    </article>;\n}\n_s(Page, \"yRyXRnOxorZkK1XZ0UEyBMBCvDE=\", false, function () {\n  return [useLoaderData];\n});\n_c = Page;\nexport const Row = ({\n  children\n}) => <section className=\"hover:scale-105 transition-all my-2 grid grid-cols-6 shadow p-4 rounded\">\n    {Children.map(children, (child, index) => {\n    return <span key={index} className=\"col-span-2\">\n          {child}\n        </span>;\n  })}\n  </section>;\n_c2 = Row;\nvar _c, _c2;\n$RefreshReg$(_c, \"Page\");\n$RefreshReg$(_c2, \"Row\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": ["import_react"]
}
